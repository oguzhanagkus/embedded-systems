/*
 * led_strip.cpp
 *
 *  Created on: Jun 12, 2021
 *      Author: OÄŸuzhan
 */

#include <cstring>

#include "led_strip.h"

LEDStrip::LEDStrip(uint8_t led_count, bool *sent_flag, TIM_HandleTypeDef *htim, uint32_t channel)
{
	this->led_count = led_count;
	this->sent_flag = sent_flag;
	this->htim = htim;
	this->channel = channel;

	set_brightness(127);
	set_single_color(0, 0, 0);
	update();
	HAL_Delay(1000);
	set_single_color(255, 255, 255);
	update();
	HAL_Delay(1000);
	set_single_color(0, 0, 0);
	update();
}

void LEDStrip::update()
{
	uint16_t index = 0;
	uint32_t color;

	for (int i = 0; i < led_count; i++)
	{
		color = ((led_data[i][GREEN] << 16) | (led_data[i][RED] << 8) | led_data[i][BLUE]);

		for (int j = 23; j >= 0; j--)
		{
			if (color & (1 << j)) pwm_data[index] = 60;
			else pwm_data[index] = 30;

			index++;
		}
	}

	for (int i = 0; i < 50; i++)
	{
		pwm_data[index] = 0;
		index++;
	}

	HAL_TIM_PWM_Start_DMA(htim, channel, (uint32_t *) pwm_data, index);

	while (!(*sent_flag)) {};

	*sent_flag = false;
}

void LEDStrip::set_brightness(uint8_t brightness)
{
	this->brightness = (float)brightness / 255;
	update_led_data();
}

void LEDStrip::set_single_color(uint8_t r, uint8_t g, uint8_t b)
{
	for (int i = 0; i < led_count; i++)
	{
		set_single_led(i, r, g, b);
	}

	update_led_data();
}

void LEDStrip::set_palette(uint8_t palette_no)
{
	switch (palette_no)
	{
		case 1:
			set_rainbow(); break;
		case 2:
			set_police(); break;
		case 3:
			set_flame(); break;
		case 4:
			set_rgb(); break;
	}

	update_led_data();
}

void LEDStrip::set_image()
{
	example_image();
	set_single_color(0, 0, 0);
	update();
}

/* -------------------------------------------------- */

void LEDStrip::update_led_data()
{
	for (int i = 0; i < led_count; i++)
	{
		led_data[i][RED] = leds[i][RED] * brightness;
		led_data[i][GREEN] = leds[i][GREEN] * brightness;
		led_data[i][BLUE] = leds[i][BLUE] * brightness;
	}
}

void LEDStrip::set_single_led(uint8_t led_no, uint8_t r, uint8_t g, uint8_t b)
{
	leds[led_no][RED] = r;
	leds[led_no][GREEN] = g;
	leds[led_no][BLUE] = b;
}

/* -------------------------------------------------- */

void LEDStrip::set_rainbow()
{
	for (int i = 0; i < led_count; i++)
	{
		switch (i % 7)
		{
			case (0):
				set_single_led(i, 148, 0, 211); break;
			case (1):
				set_single_led(i, 75, 0, 130); break;
			case (2):
				set_single_led(i, 0, 0, 255); break;
			case (3):
				set_single_led(i, 0, 255, 0); break;
			case (4):
				set_single_led(i, 255, 255, 0); break;
			case (5):
				set_single_led(i, 255, 127, 0); break;
			case (6):
				set_single_led(i, 255, 0 , 0); break;
		}
	}
}

void LEDStrip::set_police()
{
	for (int i = 0; i < led_count; i++)
	{
		switch (i % 2)
		{
			case (0):
				set_single_led(i, 255, 0, 0); break;
			case (1):
				set_single_led(i, 0, 0, 255); break;
		}
	}
}

void LEDStrip::set_flame()
{
	for (int i = 0; i < led_count; i++)
	{
		switch (i % 5)
		{
			case (0):
				set_single_led(i, 255, 127, 0); break;
			case (1):
				set_single_led(i, 128, 63, 0); break;
			case (2):
				set_single_led(i, 192, 63, 0); break;
			case (3):
				set_single_led(i, 255, 0, 0); break;
			case (4):
				set_single_led(i, 255, 32, 0); break;
		}
	}
}

void LEDStrip::set_rgb()
{
	for (int i = 0; i < led_count; i++)
	{
		switch (i % 3)
		{
			case (0):
				set_single_led(i, 255, 0, 0); break;
			case (1):
				set_single_led(i, 0, 255, 0); break;
			case (2):
				set_single_led(i, 0, 0, 255); break;
		}
	}
}

void LEDStrip::example_image()
{
	uint8_t image_data[4740 * 3] = {43,202,246,144,203,247,141,202,247,139,200,245,138,200,247,138,200,247,135,198,249,133,196,247,131,197,247,130,196,246,129,195,245,127,193,243,127,190,241,126,189,240,128,192,240,129,193,239,125,192,237,123,190,235,121,187,239,122,185,239,122,183,240,122,181,237,119,181,232,117,181,227,115,182,227,113,181,226,111,178,230,110,177,230,110,175,229,109,175,225,106,175,217,105,174,215,106,173,218,105,171,219,105,169,217,103,167,215,103,167,215,101,165,213,99,162,213,98,161,212,98,161,212,96,159,210,94,157,210,93,156,209,92,155,209,91,154,208,87,152,206,85,150,204,86,149,203,85,148,202,81,146,202,80,145,201,78,143,199,77,142,198,73,139,197,72,138,196,72,138,198,71,137,197,69,135,195,67,133,193,66,132,192,65,131,191,63,129,189,61,127,187,61,125,186,59,123,184,60,124,185,56,120,181,56,120,181,52,116,177,55,117,178,53,115,176,51,112,175,50,111,174,50,110,173,49,109,172,48,108,171,47,107,170,46,106,169,145,204,248,144,203,247,141,202,247,139,200,245,138,199,246,138,200,247,138,200,249,136,198,249,132,195,246,132,195,246,132,195,246,131,195,243,132,194,243,130,192,241,129,191,240,127,191,237,124,190,238,123,189,237,120,187,239,118,185,238,121,184,238,121,182,236,120,182,233,119,181,230,117,181,227,114,181,226,112,178,228,110,177,229,109,176,228,109,175,225,107,174,219,108,172,216,106,172,220,105,171,219,105,169,217,103,167,215,103,167,215,101,165,213,99,162,213,98,161,212,98,161,212,96,159,210,94,157,210,93,156,209,92,155,209,91,154,208,87,152,206,85,150,204,86,149,203,85,148,202,81,146,202,80,145,201,78,143,199,77,142,198,73,139,197,72,138,196,72,138,198,71,137,197,69,135,195,67,133,193,66,132,192,65,131,191,63,129,189,61,127,187,61,125,186,59,123,184,60,124,185,56,120,181,56,120,181,52,116,177,55,117,178,53,115,176,51,112,175,50,111,174,50,110,173,49,109,172,48,108,171,47,107,170,46,106,169,141,203,244,141,203,244,141,202,246,141,202,247,140,201,248,139,200,247,138,198,248,136,196,246,136,196,246,135,195,245,132,192,242,131,192,239,130,191,238,130,191,236,129,190,235,127,189,236,126,189,242,122,189,242,116,190,239,115,189,236,116,186,235,118,184,234,120,182,233,120,180,232,119,179,231,118,178,228,114,178,226,110,178,223,107,178,224,108,176,223,111,171,223,110,170,222,108,171,222,105,171,221,105,168,219,103,166,217,103,166,217,101,164,215,99,162,213,98,161,212,98,161,212,96,159,210,94,157,210,93,156,209,92,155,209,91,154,208,87,152,206,85,150,204,86,149,203,85,148,202,81,146,202,80,145,201,78,143,201,77,142,200,73,139,197,72,138,196,72,138,198,71,137,197,69,135,195,67,133,193,66,132,192,65,131,191,63,129,189,61,127,187,61,125,186,59,123,184,60,124,185,56,120,181,56,120,181,52,116,177,55,117,178,53,115,176,51,112,175,50,111,174,50,110,173,49,109,172,48,108,171,47,107,170,46,106,169,142,205,248,141,204,247,138,201,245,137,200,244,137,198,245,137,198,245,137,198,245,136,198,247,132,194,243,133,195,244,133,195,244,132,194,241,132,194,241,132,194,241,130,192,239,127,191,239,125,190,244,122,189,242,117,189,239,115,189,236,115,188,233,117,185,232,116,182,234,118,179,233,119,179,233,117,179,230,112,179,224,110,179,221,107,178,222,108,176,223,111,170,226,110,169,225,108,171,224,105,171,221,105,168,219,103,166,217,103,166,217,101,164,215,99,162,213,98,161,212,98,161,212,96,159,210,94,157,210,93,156,209,92,155,209,91,154,208,87,152,206,85,150,204,86,149,203,85,148,202,81,146,202,80,145,201,78,143,201,77,142,200,73,139,197,72,138,196,72,138,198,71,137,197,69,135,195,67,133,193,66,132,192,65,131,191,63,129,189,61,127,187,61,125,186,59,123,184,60,124,185,56,120,181,56,120,181,52,116,177,55,117,178,53,115,176,51,112,175,50,111,174,50,110,173,49,109,172,48,108,171,47,107,170,46,106,169,140,204,250,139,203,249,139,203,249,139,203,249,137,204,249,135,202,247,133,200,245,131,199,244,130,198,243,130,198,245,129,197,244,126,194,243,124,192,241,124,191,243,124,191,243,124,191,243,124,190,242,123,189,241,124,185,239,122,185,236,119,185,233,117,185,232,114,184,235,112,182,233,115,180,236,114,179,233,109,180,226,108,179,223,106,179,220,106,177,223,107,172,228,108,170,229,106,172,224,105,171,221,105,168,219,103,166,217,103,166,217,101,164,215,99,162,213,98,161,212,98,161,212,96,159,210,94,157,210,93,156,209,92,155,209,91,154,208,87,152,206,85,150,204,86,149,203,85,148,202,81,146,202,80,145,201,78,143,201,77,142,200,73,139,199,72,138,198,72,138,198,71,137,197,69,135,195,67,133,193,66,132,192,65,131,191,63,129,189,61,127,187,61,125,186,59,123,184,60,124,185,56,120,181,56,120,181,52,116,177,55,117,178,53,115,176,51,112,175,50,111,174,50,110,173,49,109,172,48,108,171,47,107,170,46,106,169,167,195,243,166,194,242,167,193,242,167,194,241,166,194,241,165,194,238,161,192,236,159,194,236,151,189,234,149,192,237,144,192,238,138,192,239,132,190,240,128,191,242,126,192,244,124,191,243,123,188,242,124,187,240,126,183,236,125,183,233,121,185,231,117,185,232,116,184,233,113,183,234,114,181,234,113,180,233,108,180,228,107,180,225,109,177,224,109,175,225,107,172,228,106,171,227,106,172,224,105,171,221,105,168,219,103,166,217,103,166,217,101,164,215,99,162,213,98,161,212,98,161,212,96,159,210,94,157,210,93,156,209,92,155,209,91,154,208,87,152,206,85,150,204,86,149,203,85,148,202,81,146,202,80,145,201,78,143,201,77,142,200,73,139,199,72,138,198,72,138,198,71,137,197,69,135,195,67,133,193,66,132,192,65,131,191,63,129,189,61,127,187,61,125,186,59,123,184,60,124,185,56,120,181,56,120,181,52,116,177,55,117,178,53,115,176,51,112,175,50,111,174,50,110,173,49,109,172,48,108,171,47,107,170,46,106,169,197,149,199,193,143,194,191,139,188,188,136,184,190,136,185,191,139,187,193,146,192,192,150,196,195,166,212,190,174,219,181,182,228,169,186,232,157,189,236,145,192,238,134,190,239,125,187,238,126,188,245,126,187,242,127,185,233,126,185,229,121,186,228,118,185,228,120,182,231,117,180,231,115,181,231,113,181,230,108,180,230,108,178,229,113,174,231,115,171,228,110,171,225,108,171,224,106,172,222,105,171,221,105,168,219,103,166,217,103,166,217,101,164,215,99,162,213,98,161,212,98,161,212,96,159,210,94,157,210,93,156,209,92,155,209,91,154,208,87,152,206,85,150,204,86,149,203,85,148,202,81,146,202,80,145,201,78,143,201,77,142,200,73,139,199,72,138,198,72,138,198,71,137,197,69,135,195,67,133,193,66,132,192,65,131,191,63,129,189,61,127,187,61,125,186,59,123,184,60,124,185,56,120,181,56,120,181,52,116,177,55,117,178,53,115,176,51,112,175,50,111,174,50,110,173,49,109,172,48,108,171,47,107,170,46,106,169,173,74,121,174,72,119,176,73,118,180,75,118,181,76,119,180,75,118,177,74,117,173,78,120,161,76,118,155,84,128,153,96,141,153,112,156,157,134,178,169,157,203,175,176,222,174,184,233,158,177,233,149,179,233,142,180,227,133,182,223,121,184,225,117,184,227,117,181,229,116,180,228,117,181,229,113,181,228,109,179,230,110,177,230,114,173,231,115,171,228,110,172,223,108,172,220,106,172,222,105,171,221,105,168,219,103,166,217,103,166,217,101,164,215,99,162,213,98,161,212,98,161,212,96,159,210,94,157,210,93,156,209,92,155,209,91,154,208,87,152,206,85,150,204,86,149,203,85,148,202,81,146,202,80,145,201,78,143,201,77,142,200,73,139,199,72,138,198,72,138,198,71,137,197,69,135,195,67,133,193,66,132,192,65,131,191,63,129,189,61,127,187,61,125,186,59,123,184,60,124,185,56,120,181,56,120,181,52,116,177,55,117,178,53,115,176,51,112,175,50,111,174,50,110,173,49,109,172,48,108,171,47,107,170,46,106,169,204,78,116,205,79,116,207,78,116,208,78,114,207,77,113,208,77,111,209,78,112,209,79,115,206,78,113,203,77,115,198,78,116,195,78,120,188,77,119,183,76,120,183,80,125,178,91,136,192,130,177,190,158,205,178,179,225,148,179,223,122,181,223,114,187,230,114,187,230,109,180,226,111,177,225,112,178,226,114,182,231,111,179,228,110,176,226,112,176,224,111,173,220,110,174,220,105,171,221,104,170,222,105,168,221,104,167,220,102,165,216,101,164,215,99,162,213,99,162,213,97,160,211,96,159,210,94,157,210,93,156,209,91,154,207,89,152,205,86,151,205,85,150,204,85,148,202,85,148,202,82,147,203,80,145,201,77,142,200,75,140,198,72,138,196,72,138,196,71,137,197,70,136,196,69,135,195,67,133,193,65,131,191,64,130,190,63,129,189,63,129,189,61,125,186,59,123,184,59,123,184,56,120,181,57,121,182,53,117,178,55,117,178,53,115,176,51,112,175,50,111,174,50,110,173,49,109,172,48,108,171,47,107,170,46,106,169,222,84,107,222,84,107,222,83,106,221,82,105,220,80,106,219,79,105,221,78,106,221,78,106,221,76,107,222,74,108,224,74,109,225,75,112,224,72,111,222,70,109,222,70,109,217,77,116,190,78,118,167,82,123,156,105,146,166,145,188,168,173,215,150,178,218,131,173,215,122,173,218,115,173,221,111,174,225,104,170,220,107,173,223,111,177,225,112,179,224,114,178,224,106,170,218,108,171,222,105,171,223,106,169,222,104,167,220,102,165,216,100,163,214,99,162,213,98,161,212,96,159,210,95,158,209,93,156,209,92,155,208,91,154,207,90,153,206,86,151,205,85,150,204,84,147,201,83,146,200,79,144,200,77,142,198,76,141,199,75,140,198,74,140,198,75,141,199,74,140,200,71,137,197,68,134,194,66,132,192,66,132,192,65,131,191,63,129,189,61,127,187,63,127,188,60,124,185,60,124,185,56,120,181,57,121,182,53,117,178,55,117,178,52,114,175,51,112,175,50,111,174,50,110,173,49,109,172,48,108,171,47,107,170,46,106,169,231,95,95,230,94,96,228,93,97,226,91,98,224,90,101,223,88,103,219,86,107,219,85,109,220,83,111,220,81,112,221,80,112,224,80,113,226,81,114,225,77,111,225,75,110,222,77,110,214,79,111,213,88,120,202,86,121,184,78,116,180,84,122,183,112,152,179,148,189,165,172,216,134,176,226,112,172,226,112,173,228,107,168,222,105,169,217,106,170,216,105,167,216,111,174,225,112,175,228,109,175,227,110,173,226,109,172,225,107,170,223,105,168,221,104,167,218,103,166,217,101,164,217,100,163,216,100,163,216,100,163,216,99,162,215,99,162,215,96,161,215,95,160,214,98,161,215,96,159,213,92,157,211,88,153,207,83,148,204,78,143,199,72,138,196,69,135,193,72,138,196,70,136,194,68,134,194,67,133,193,67,133,193,66,132,192,64,130,188,61,127,185,61,125,186,59,123,184,59,123,184,55,119,180,56,120,181,53,117,178,55,117,178,52,114,175,51,112,175,50,111,174,50,110,173,49,109,172,48,108,171,47,107,170,46,106,169,233,101,88,232,100,88,231,98,91,229,97,93,229,96,99,226,95,103,223,92,106,222,91,109,221,89,112,220,86,111,221,84,110,222,84,110,224,84,111,225,83,109,225,81,108,225,81,106,224,82,104,220,78,100,222,78,103,228,84,111,226,81,112,205,80,114,179,92,126,158,111,147,158,147,189,148,165,211,131,163,214,117,164,216,105,167,216,100,168,215,107,171,219,97,160,211,96,162,214,96,162,214,100,163,216,101,164,217,103,166,219,104,167,220,105,168,219,106,169,220,104,167,220,103,166,219,101,164,217,99,162,215,98,161,214,97,160,213,94,159,213,94,159,213,91,154,208,91,154,208,90,155,209,90,155,209,90,155,211,89,154,210,85,151,209,83,149,207,73,139,197,72,138,196,71,137,197,68,134,194,65,131,191,63,129,189,63,129,187,63,129,187,61,125,186,58,122,183,59,123,184,55,119,180,57,121,182,53,117,178,54,116,177,52,114,175,51,112,175,50,111,174,50,110,173,49,109,172,48,108,171,47,107,170,46,106,169,234,105,86,233,103,87,233,103,89,232,101,93,232,100,98,231,98,103,228,97,105,226,94,107,225,92,109,226,90,110,224,88,108,224,88,108,224,88,108,223,88,105,223,88,105,224,89,104,225,89,103,225,89,101,226,88,101,226,88,103,227,86,105,222,84,107,215,86,108,207,91,112,190,92,115,179,113,141,170,148,187,142,163,210,107,169,218,92,170,219,93,161,210,104,168,216,97,163,213,96,162,214,96,159,212,94,157,210,91,154,207,89,152,205,87,150,203,86,149,202,86,149,202,88,151,204,91,154,207,94,157,210,95,158,211,94,157,210,89,154,208,87,152,206,92,155,208,90,153,206,85,150,204,83,148,202,83,148,202,83,148,202,82,149,204,81,148,203,86,152,210,78,144,202,70,136,194,67,133,191,67,133,191,67,133,191,62,128,186,58,124,182,62,126,187,60,124,185,60,124,185,56,120,181,57,121,182,53,117,178,54,116,177,51,113,174,51,112,175,50,111,174,50,110,173,49,109,172,48,108,171,47,107,170,46,106,169,233,106,89,233,106,89,233,106,91,233,105,94,234,102,97,233,101,99,232,99,102,231,97,104,229,95,104,228,94,105,228,93,107,228,93,107,227,92,107,226,91,105,224,92,105,223,91,104,226,92,101,225,90,97,224,87,95,227,87,98,229,89,102,231,89,103,232,86,99,228,84,94,225,85,94,206,89,105,173,99,124,161,131,167,140,159,202,118,164,213,110,166,213,98,160,209,95,158,209,93,159,211,94,157,210,93,156,209,91,154,207,90,153,206,89,152,205,88,151,204,86,149,202,83,146,199,80,143,196,78,141,194,80,143,196,84,147,200,87,152,206,91,156,210,87,150,203,86,149,202,82,147,201,81,146,200,80,145,199,80,145,199,79,146,201,78,145,200,75,141,199,80,146,204,83,149,207,79,145,203,69,135,193,62,128,186,62,128,186,64,130,188,61,125,186,58,122,183,59,123,184,55,119,180,57,121,182,53,117,178,55,117,178,52,114,175,51,112,175,50,111,174,50,110,173,49,109,172,47,107,170,47,107,170,46,106,169,234,103,93,235,104,94,235,104,94,235,104,96,236,103,96,235,102,97,235,101,98,235,101,100,232,98,99,232,97,103,232,97,104,231,95,105,231,95,107,230,94,108,229,93,107,228,92,106,225,91,102,231,93,106,238,93,108,235,88,104,229,89,102,228,91,101,230,93,101,229,92,99,229,93,97,226,93,98,217,93,103,192,91,109,177,108,137,165,140,179,129,158,202,102,160,208,96,159,212,94,159,213,94,157,210,93,156,209,91,154,207,89,152,205,87,150,203,86,149,202,83,146,199,83,146,199,83,146,199,83,146,199,81,144,197,77,140,193,71,136,190,68,133,187,80,143,196,81,144,197,79,145,197,79,145,197,78,143,197,76,141,195,73,140,195,72,139,194,74,141,196,71,138,193,70,136,194,74,140,198,78,144,202,76,142,200,69,136,191,61,127,185,63,127,188,60,124,185,59,123,184,54,118,179,55,119,180,52,116,177,55,117,178,54,116,177,51,112,175,50,111,174,50,110,173,49,109,172,47,107,170,47,107,170,46,106,169,233,97,97,234,99,96,235,102,97,236,103,98,234,103,95,234,103,95,234,103,95,235,103,98,235,103,99,235,101,100,234,100,101,233,98,104,233,98,105,233,97,107,232,98,109,230,96,107,233,99,108,230,94,104,235,90,105,238,93,106,235,95,104,229,94,101,228,93,99,229,94,98,229,93,95,232,92,93,235,91,91,229,92,99,210,93,111,182,104,130,155,131,165,136,154,194,112,150,197,101,153,201,100,153,203,96,152,201,92,152,204,90,152,203,89,150,204,88,149,203,86,147,201,85,146,200,83,144,198,80,143,196,80,142,193,78,140,191,76,138,189,75,137,188,70,132,183,71,133,184,70,133,184,71,134,187,70,133,187,71,134,188,70,135,191,71,136,192,69,134,190,69,134,190,69,134,190,69,134,190,69,135,193,71,137,195,71,140,197,74,140,198,71,135,196,68,130,191,62,126,187,56,121,179,55,119,180,52,116,177,54,116,177,54,114,176,52,112,175,51,111,174,50,110,172,49,109,171,47,107,169,47,107,170,46,106,169,227,80,90,234,89,96,238,98,101,237,102,99,234,102,97,231,104,95,232,105,96,233,106,97,233,105,96,234,102,97,234,102,98,234,101,102,232,102,104,231,102,106,229,103,106,229,103,106,231,102,106,232,101,106,234,99,105,234,99,105,233,98,102,232,97,101,233,97,101,232,96,98,232,94,94,232,94,94,235,95,96,226,90,92,227,98,103,209,93,102,192,96,108,209,150,170,208,201,235,147,172,213,126,161,203,102,145,188,92,142,191,91,147,198,89,144,200,88,143,200,90,145,202,85,141,198,82,142,196,77,139,190,80,140,190,73,134,181,75,131,180,78,132,179,73,129,176,69,127,175,65,125,175,65,125,177,66,127,182,65,126,183,64,124,184,63,124,181,64,123,179,63,124,179,63,124,179,67,130,184,69,134,190,62,131,188,59,129,188,68,137,196,72,134,195,74,134,196,72,134,193,67,132,188,64,130,188,62,127,185,62,122,184,60,118,182,59,114,179,60,115,179,59,115,176,53,112,172,48,108,168,46,106,168,46,105,171,225,68,85,231,76,90,234,87,95,235,95,96,234,100,97,233,105,96,233,106,97,232,106,94,233,105,96,233,105,96,235,103,98,235,103,99,233,103,101,232,104,103,230,105,103,230,105,103,231,103,102,231,103,102,232,102,102,232,102,102,234,102,100,234,102,100,234,100,99,234,100,99,237,103,100,231,97,94,236,102,99,230,96,93,231,97,96,235,101,100,222,88,87,198,91,97,199,142,161,240,220,247,216,216,244,197,213,246,166,200,237,148,190,232,139,181,229,128,172,221,119,159,211,119,161,211,121,165,212,121,165,210,121,168,210,136,181,223,138,179,223,136,175,218,134,176,218,126,169,212,108,152,197,85,133,181,68,120,170,66,119,173,67,124,179,69,126,181,60,120,174,63,122,178,62,123,178,56,119,173,53,118,174,62,127,185,65,131,191,60,126,186,67,129,188,67,129,188,65,130,188,62,128,186,61,127,187,61,127,187,61,125,187,63,123,186,58,116,179,59,114,178,57,113,174,54,113,173,53,113,173,52,112,174,49,110,175,225,57,80,226,63,82,229,73,86,233,84,90,237,94,96,236,101,97,236,103,96,235,104,96,236,105,97,236,105,97,237,105,100,237,105,101,237,105,103,234,104,102,234,104,102,233,103,101,233,104,99,233,104,99,233,106,99,233,106,99,233,106,99,231,107,99,231,107,99,231,107,99,231,104,97,231,104,97,234,105,99,228,99,93,227,95,90,232,99,94,229,96,91,220,95,91,198,90,90,196,111,116,247,196,203,241,219,231,220,225,244,200,220,244,195,220,250,193,217,251,203,219,253,201,215,250,195,212,242,195,212,242,196,215,247,186,206,239,197,213,249,191,207,243,195,209,244,191,207,243,191,213,252,185,214,254,146,184,223,93,138,179,63,116,160,62,120,166,64,124,178,61,123,180,59,121,180,59,121,180,59,120,177,57,118,175,58,117,175,59,120,177,53,123,174,56,127,179,59,128,185,58,126,187,55,123,188,53,121,186,51,121,183,53,122,181,55,121,179,55,120,176,57,117,177,55,115,175,53,113,176,51,112,175,49,113,177,227,53,80,227,55,79,227,61,81,229,71,85,234,83,90,237,93,93,237,99,96,236,101,95,237,104,97,237,106,98,237,105,100,237,105,100,237,105,101,237,105,101,237,105,101,237,105,101,235,106,100,235,107,98,234,107,98,232,108,96,231,109,98,230,110,96,230,109,98,230,110,96,230,109,98,231,109,96,229,105,95,232,105,96,233,105,96,231,100,92,231,98,91,234,99,93,230,95,89,216,94,89,187,93,91,208,142,143,232,191,195,252,229,239,242,226,239,233,220,237,223,212,229,222,213,232,217,214,231,210,213,230,211,218,237,205,211,235,208,212,241,208,211,242,205,208,239,207,212,242,201,212,242,195,212,242,191,216,247,182,215,248,158,198,233,131,176,215,106,154,200,69,121,169,56,112,163,64,119,173,62,117,173,62,117,173,65,120,177,57,117,171,54,122,171,49,121,171,53,119,177,55,121,182,59,124,188,60,125,189,54,122,183,50,121,177,48,117,172,50,117,172,54,116,175,55,115,177,54,114,177,52,113,176,49,113,175,232,51,86,230,51,83,227,55,81,228,61,81,230,70,82,232,81,88,236,92,92,239,100,97,236,103,98,236,104,99,235,107,98,235,107,98,237,105,100,237,105,100,239,106,101,240,107,100,238,107,97,236,108,97,235,109,97,233,110,95,231,109,96,230,110,94,228,110,96,228,111,94,229,111,97,231,111,95,232,110,97,233,109,97,233,105,94,235,104,94,236,103,94,226,91,85,229,94,91,227,95,93,219,95,93,206,93,89,197,93,90,189,98,97,221,141,142,248,184,185,255,221,223,249,220,224,237,226,232,220,220,228,214,220,232,223,229,245,211,212,232,219,219,243,210,216,242,209,216,244,206,216,241,204,216,240,201,215,242,197,214,242,194,213,243,190,213,244,190,217,246,192,223,254,156,192,228,96,138,180,63,109,158,59,110,163,59,114,168,56,116,168,57,119,170,55,118,171,55,116,171,55,116,173,55,115,175,55,115,175,55,117,174,56,118,175,59,124,180,56,121,179,52,116,178,52,113,178,53,113,176,54,114,176,55,114,172,232,50,90,230,50,87,229,51,83,226,54,80,225,60,77,227,70,81,233,82,87,238,94,94,235,100,97,234,102,97,233,105,96,233,106,97,235,107,98,237,106,96,239,106,97,240,107,98,236,108,97,236,108,95,235,109,95,233,110,95,232,110,95,230,110,94,230,110,94,228,111,94,228,108,92,234,114,98,233,111,96,231,108,93,232,106,94,233,105,94,235,104,94,235,104,96,229,96,91,229,94,91,232,94,91,228,93,89,227,94,89,221,94,87,211,94,87,197,94,87,185,102,96,205,140,134,244,199,196,250,220,220,236,216,218,228,215,222,242,232,241,225,219,231,225,227,242,221,227,243,219,226,242,215,224,241,212,220,239,207,218,240,206,218,240,205,220,241,197,214,234,196,216,240,190,214,240,190,219,251,172,207,245,112,154,196,63,107,152,60,108,156,59,109,160,58,109,162,59,112,164,58,113,167,57,112,166,56,111,167,57,112,168,57,113,170,53,112,170,55,115,177,55,116,179,55,116,179,53,114,177,53,113,175,55,114,174,228,49,91,229,50,90,227,51,89,225,52,82,222,53,76,224,59,76,228,71,82,232,83,87,233,93,92,231,98,93,231,103,94,232,105,96,233,107,95,234,106,93,237,107,94,237,107,94,236,108,97,235,109,97,235,109,95,236,110,96,234,111,96,234,111,96,234,111,96,234,111,96,235,112,97,236,113,98,232,109,94,233,110,95,242,116,104,236,110,98,227,101,89,232,106,94,232,104,93,227,99,88,230,99,91,228,96,91,225,93,89,230,101,96,219,94,88,215,92,84,219,98,89,210,96,86,190,86,77,218,128,120,255,196,189,250,201,196,242,213,209,237,222,217,239,232,226,234,233,231,232,233,238,226,233,243,220,232,244,215,231,244,211,229,243,208,227,242,209,227,247,202,220,242,202,220,242,195,216,237,191,211,235,201,222,249,191,216,247,154,182,221,114,146,193,91,129,178,67,109,157,54,100,149,51,102,149,52,104,154,50,101,156,47,97,156,55,105,166,54,108,170,53,112,172,53,113,173,50,114,175,49,113,174,49,113,175,222,49,95,223,50,95,227,52,93,225,51,88,223,50,80,221,52,75,224,61,78,228,72,83,233,87,90,231,93,91,231,99,94,232,104,95,233,105,94,233,105,92,235,105,91,235,105,91,236,108,95,235,109,95,236,110,96,236,110,96,237,111,97,237,111,97,238,112,98,238,112,97,240,114,100,232,106,91,235,112,97,235,112,97,231,108,93,233,111,96,234,112,97,229,107,92,228,105,89,232,106,92,231,100,90,229,98,90,231,98,93,228,95,90,229,98,90,228,95,86,230,92,81,234,93,83,226,90,78,219,93,81,201,95,82,245,163,149,234,177,160,222,184,163,223,193,167,227,205,181,238,219,202,247,233,220,249,240,231,243,240,233,236,237,232,230,234,233,226,231,235,222,231,238,218,228,237,213,226,235,210,222,236,203,216,233,200,215,238,202,219,247,196,218,255,191,219,255,188,220,255,185,220,255,174,213,252,158,200,242,143,183,232,134,174,225,113,154,206,90,133,184,62,110,159,46,98,148,48,101,153,53,110,165,54,113,173,214,50,100,217,51,99,220,50,95,222,50,90,225,49,85,225,50,79,223,54,77,220,57,74,227,73,83,229,83,86,232,94,92,232,99,92,232,99,90,233,101,89,235,103,90,236,104,91,234,106,93,235,107,94,236,108,95,237,110,95,237,111,96,237,111,96,238,112,97,238,113,95,236,113,97,235,112,94,233,112,95,232,112,95,233,113,96,233,113,96,229,112,94,229,109,92,230,109,92,232,105,90,233,101,89,235,98,88,236,98,88,235,98,88,232,98,89,229,97,85,230,93,83,233,95,84,232,90,80,231,93,82,221,95,80,204,94,71,237,146,119,244,168,132,229,167,120,225,170,116,223,170,116,224,172,122,229,178,133,239,194,153,252,214,178,255,229,199,255,240,215,253,242,224,245,242,233,235,239,238,226,235,244,218,230,244,215,228,244,210,227,245,201,222,243,199,221,244,199,221,244,198,220,244,193,217,245,190,215,245,189,213,247,189,215,248,188,214,247,189,218,248,187,216,246,176,209,242,134,168,206,85,124,167,53,97,146,204,52,103,208,52,100,213,51,100,218,51,95,222,50,90,225,49,85,225,50,81,223,54,77,223,62,78,226,72,82,228,82,85,231,89,87,232,93,88,232,95,85,234,96,86,234,98,86,235,103,91,235,105,91,236,106,92,236,109,94,237,110,95,237,112,94,238,113,95,237,115,94,234,113,94,235,114,93,235,116,94,233,117,94,232,116,93,230,116,92,230,115,94,231,116,95,230,110,93,230,107,91,233,103,89,234,100,88,236,100,88,236,100,88,232,100,88,230,98,86,230,98,86,227,90,80,239,98,89,230,89,79,228,92,76,225,99,77,214,96,70,230,126,91,255,163,115,250,165,108,246,164,104,244,164,101,240,166,105,235,166,107,225,164,107,216,163,109,210,168,118,212,179,134,219,195,159,228,211,185,240,227,211,249,241,230,251,244,234,241,241,233,236,238,233,229,235,233,222,227,231,215,224,231,212,221,236,208,221,238,203,221,241,200,221,242,189,210,229,195,216,237,196,214,236,191,211,236,196,217,248,192,218,255,159,190,234,194,51,105,199,52,104,205,53,104,212,52,100,219,49,94,223,48,89,224,48,86,224,51,81,221,53,78,222,59,78,224,68,81,227,76,83,231,82,84,233,88,85,235,90,87,234,91,85,234,96,86,233,99,87,235,101,89,236,104,89,234,107,90,234,109,89,234,112,91,234,114,90,233,114,92,232,116,91,231,117,91,231,117,91,230,116,90,227,116,89,228,117,90,228,116,92,227,115,95,228,111,94,229,108,91,231,105,90,232,105,90,233,103,89,230,103,88,228,101,86,230,102,89,222,94,81,228,96,84,230,98,86,224,90,79,229,97,85,217,85,73,221,94,77,219,98,71,236,122,88,254,150,111,255,167,121,252,170,112,241,167,102,238,171,100,240,178,103,232,170,97,232,172,102,228,169,101,223,168,103,220,166,104,213,162,105,218,173,118,233,195,146,237,210,167,249,229,194,255,241,218,246,240,228,231,233,230,220,231,237,212,229,239,205,224,238,209,228,243,200,218,238,205,221,246,204,218,247,196,211,244,199,217,253,193,212,252,184,52,109,188,53,109,197,54,108,205,54,105,213,53,101,217,50,94,221,48,91,223,49,86,221,50,82,221,53,79,221,58,79,222,64,79,226,70,81,230,77,82,234,81,84,234,84,85,232,87,82,234,91,83,237,96,87,237,101,89,236,103,88,235,105,89,234,107,88,233,111,90,235,114,93,232,116,91,231,115,90,231,117,90,232,118,91,231,120,92,230,119,91,228,117,90,227,117,94,227,115,93,228,111,91,230,109,90,230,107,89,231,105,90,230,104,89,228,102,87,225,102,87,226,103,88,220,94,80,231,103,92,225,92,83,228,91,85,235,96,91,231,90,83,225,89,75,223,94,73,214,94,70,208,99,66,221,124,79,244,158,101,252,171,105,246,168,94,251,174,96,240,165,82,242,168,83,244,172,87,239,167,82,238,170,85,238,173,93,225,167,93,217,169,103,208,169,110,205,171,123,214,186,147,231,212,182,244,233,211,242,239,224,232,233,227,223,229,229,219,228,237,209,217,236,211,223,249,210,223,255,201,214,248,201,214,246,172,54,112,178,56,113,186,57,113,196,57,112,203,55,107,210,52,101,214,51,98,219,50,93,220,50,89,219,50,83,218,51,79,220,54,78,220,57,76,223,62,77,227,67,79,228,71,80,229,74,78,232,80,79,234,84,83,236,88,84,237,93,85,238,97,88,239,103,91,238,106,93,236,109,92,235,110,90,233,112,91,234,115,91,233,117,92,232,118,92,232,118,92,230,119,92,228,118,91,228,117,90,228,114,88,231,112,90,232,110,89,233,108,90,232,105,88,230,105,87,223,100,84,229,106,90,224,101,85,225,97,84,229,97,85,230,93,85,231,88,82,234,91,85,231,94,86,225,93,81,227,97,83,227,102,84,217,97,73,207,94,64,217,111,71,235,138,85,252,165,96,253,174,95,248,176,91,240,173,84,240,173,84,241,176,86,239,173,86,233,171,88,228,172,97,225,171,99,227,173,101,225,171,99,216,163,93,210,161,95,224,179,124,238,203,161,253,229,205,246,236,227,228,228,238,216,224,245,210,224,250,207,221,247,214,224,249,161,56,115,167,58,116,176,58,116,186,58,115,194,57,111,201,54,106,206,52,102,213,51,98,216,51,94,218,49,88,218,50,85,218,51,81,218,51,77,218,52,74,220,54,74,220,58,73,222,60,71,224,63,71,225,65,73,226,70,74,230,74,77,233,81,80,236,88,86,236,93,87,237,99,89,237,103,91,239,109,95,237,112,94,234,113,94,232,113,91,232,116,93,233,119,95,228,118,91,227,117,90,230,116,92,232,113,91,232,111,90,232,110,89,232,107,89,231,106,88,228,105,89,229,103,88,228,102,87,224,97,82,230,98,85,231,95,83,233,92,82,231,90,81,229,92,82,227,93,82,227,93,82,227,93,82,228,96,84,225,98,81,221,99,75,213,101,63,212,111,59,245,153,88,255,175,99,246,174,90,243,176,89,242,178,88,238,177,84,240,179,90,240,179,96,239,178,95,241,177,90,243,178,88,242,175,86,236,170,83,231,165,87,224,167,100,209,163,113,218,185,152,245,226,209,246,237,232,230,228,231,225,225,233,227,227,235,152,56,117,157,57,117,164,59,116,174,59,116,182,58,112,190,56,107,198,54,105,205,53,100,210,53,98,213,50,93,216,50,90,219,51,86,218,51,81,217,50,76,217,51,75,219,52,72,218,51,69,220,52,69,221,53,70,222,54,69,224,56,71,227,61,73,230,66,73,229,70,74,234,80,80,234,86,82,236,95,88,236,102,91,235,107,94,234,111,96,235,115,99,234,119,101,228,117,98,228,117,98,231,116,97,231,114,96,233,114,94,232,111,92,230,109,88,229,108,87,231,108,90,229,102,85,231,99,84,233,100,85,230,97,80,229,96,79,236,103,86,227,94,77,231,95,79,229,93,79,229,93,79,230,94,82,229,95,83,231,97,85,230,101,82,229,103,80,227,108,76,210,99,56,228,129,74,255,171,104,255,179,103,243,179,92,240,184,91,236,182,86,240,181,89,243,182,91,241,180,89,237,176,85,241,177,89,243,181,94,242,177,95,233,170,91,232,173,97,221,164,95,213,163,102,218,176,126,244,212,174,251,230,203,246,233,217,142,58,118,147,59,119,155,60,118,163,60,116,173,58,115,181,56,112,190,56,109,197,54,107,204,53,104,207,51,98,210,50,94,213,51,92,215,51,88,215,50,84,217,49,82,218,51,79,221,53,79,221,51,77,223,51,75,223,51,73,224,51,71,224,51,70,224,52,68,222,54,67,219,55,64,218,59,64,220,67,70,228,80,80,235,93,89,240,103,97,239,106,99,234,107,98,231,115,102,229,116,100,231,116,98,232,115,97,233,114,94,232,113,91,230,111,89,229,110,88,228,107,86,231,106,86,235,106,87,231,100,82,233,100,83,232,101,81,224,95,74,229,98,78,230,95,76,230,95,76,231,95,79,231,95,81,230,94,80,230,94,80,231,95,81,230,97,80,228,97,77,233,109,81,222,108,71,215,113,64,234,144,84,254,174,105,255,183,107,252,185,104,252,184,99,249,183,96,247,183,95,246,185,96,242,182,94,235,178,89,238,178,90,244,183,94,243,178,88,240,175,85,236,170,84,230,168,91,218,164,100,209,166,113,227,194,153,133,59,118,138,60,118,145,60,119,155,59,120,165,57,117,174,56,116,182,54,115,188,53,111,194,52,108,199,52,106,203,52,103,206,53,100,209,52,97,212,51,95,213,50,93,216,51,91,216,52,86,217,52,82,219,52,80,221,51,78,224,52,78,225,51,74,225,52,72,224,53,71,223,52,68,223,55,68,222,56,68,220,56,65,216,55,61,222,63,68,235,79,82,242,97,94,238,111,102,228,112,97,231,114,97,234,114,97,233,114,94,233,114,92,231,115,90,227,112,85,226,111,84,228,110,84,229,109,85,232,107,87,232,105,86,232,102,86,231,99,84,229,96,81,228,95,78,228,95,76,228,95,76,228,95,78,230,94,78,231,96,77,232,97,78,233,98,79,231,99,78,231,101,77,231,106,78,230,109,78,222,108,72,219,110,71,227,121,79,234,137,86,244,156,93,250,172,100,255,189,113,247,182,100,242,185,96,243,190,98,241,188,94,238,184,88,241,183,86,240,180,84,241,176,86,240,174,88,235,168,89,229,163,89,222,159,90,126,61,119,130,61,118,140,60,121,149,59,121,159,57,120,168,55,119,177,54,117,181,53,114,187,53,112,192,53,110,196,53,107,200,53,105,204,52,103,208,51,102,211,50,100,213,51,98,213,52,93,214,52,89,217,52,86,220,52,85,222,52,81,224,51,79,224,52,76,225,51,74,226,52,75,226,53,73,225,54,73,225,54,72,224,53,69,223,53,66,223,53,64,219,58,64,215,71,70,234,101,94,244,113,103,237,109,96,235,112,96,236,115,96,232,113,91,230,114,89,231,116,89,228,113,86,227,107,83,227,105,82,229,104,84,231,104,87,232,100,87,231,97,85,229,96,79,229,96,79,229,96,79,230,95,76,231,95,79,231,96,77,233,96,78,232,97,77,236,101,81,232,100,79,232,102,80,233,104,82,231,105,82,229,105,79,229,108,81,229,115,81,217,114,69,214,121,64,220,136,72,255,186,114,248,185,105,242,188,98,243,192,100,242,192,97,237,184,88,237,181,86,241,177,87,242,175,86,244,170,85,240,164,80,237,160,78,121,60,119,125,60,118,135,59,121,144,58,121,152,56,119,161,55,119,169,53,116,176,52,115,181,53,114,186,52,111,190,53,109,195,54,107,199,52,106,203,52,105,206,52,104,208,52,100,212,52,98,215,52,95,217,52,92,218,52,90,222,52,88,223,52,86,225,51,84,225,52,82,226,53,81,224,52,78,224,52,78,226,54,78,229,55,80,228,54,77,225,52,72,222,51,69,223,55,68,215,54,62,220,67,70,237,93,92,242,109,100,236,110,96,230,110,93,230,113,93,224,105,83,232,112,88,237,112,90,233,107,85,231,102,81,233,104,85,234,105,86,232,100,85,231,98,83,232,96,82,232,96,82,232,95,79,232,94,81,232,95,79,231,95,79,232,97,78,232,99,80,230,99,79,227,101,78,229,105,81,230,109,82,229,109,82,226,108,80,225,107,77,229,115,79,226,117,76,219,121,72,215,131,71,255,187,117,250,191,113,237,185,101,237,187,100,239,188,99,240,186,96,241,181,93,242,176,90,242,170,86,240,163,81,238,160,78,118,60,118,121,60,119,129,59,121,138,58,121,147,55,118,155,55,119,163,52,118,168,52,115,175,52,115,178,52,113,185,53,111,188,53,111,194,52,108,197,52,107,200,53,108,204,53,106,209,52,103,213,53,101,214,52,99,216,53,96,219,52,95,222,53,94,223,53,92,224,52,90,226,55,91,225,54,88,224,53,87,223,52,84,225,51,84,226,53,83,227,54,82,229,55,82,229,51,75,226,48,70,221,53,70,217,57,69,218,69,73,232,93,90,242,109,102,236,108,95,239,113,98,233,108,90,231,104,85,236,107,88,237,108,87,233,102,82,231,100,80,233,102,84,232,99,84,233,97,85,234,96,83,233,95,82,232,94,81,232,94,81,232,95,79,231,95,79,228,95,76,228,97,77,229,100,78,228,102,79,229,105,81,229,108,81,230,110,83,230,109,80,232,108,80,231,110,79,224,115,76,218,122,74,217,132,75,255,182,117,255,193,121,253,191,116,249,187,110,248,185,106,248,181,103,248,177,99,248,170,95,245,166,89,245,163,87,114,60,118,118,60,119,125,59,121,132,58,121,141,56,121,149,54,120,156,54,120,162,53,118,168,53,118,172,53,117,177,53,115,182,54,115,187,53,114,191,53,113,193,54,113,197,53,112,203,54,110,206,53,107,210,53,106,212,54,105,216,54,104,217,54,101,219,53,99,220,53,97,220,53,97,221,54,97,224,55,98,223,54,95,222,52,91,222,50,88,223,51,89,226,52,89,230,52,86,232,53,83,229,50,80,224,50,77,223,51,73,218,53,69,223,68,76,238,92,93,242,105,99,239,108,98,235,108,93,230,105,87,229,102,83,233,104,83,234,101,82,233,100,81,232,99,84,232,99,84,233,97,83,232,96,82,232,95,79,232,95,79,231,94,78,231,94,78,230,93,75,232,95,77,232,97,78,229,97,76,229,99,77,231,101,79,233,104,82,234,106,81,233,103,79,236,111,83,231,112,80,224,115,76,225,122,77,220,126,74,239,150,94,242,158,98,240,156,96,239,155,93,240,154,93,239,154,90,241,153,90,240,155,90,241,156,91,110,61,117,114,60,118,120,60,120,127,58,121,135,56,121,142,56,121,149,54,120,155,54,120,160,54,120,164,53,119,170,54,119,174,54,118,179,53,117,183,53,117,186,53,116,188,52,114,196,54,114,198,53,112,203,54,112,206,54,111,209,55,109,212,55,108,213,55,106,215,54,104,215,53,103,216,54,103,217,53,103,218,55,102,222,55,101,222,55,101,224,54,99,224,53,97,224,49,90,226,50,89,228,49,88,229,51,87,228,50,82,222,50,76,218,50,73,216,55,70,220,69,76,233,89,89,241,104,98,237,105,93,233,101,88,234,102,87,234,103,85,232,99,80,231,98,81,231,98,81,232,96,80,232,96,80,232,95,79,231,94,78,233,93,78,232,92,77,233,93,76,234,94,77,234,94,77,234,94,77,233,96,78,234,97,79,234,99,80,234,99,79,239,104,82,230,100,74,228,103,73,231,111,77,229,113,76,224,113,70,225,118,74,225,120,75,226,121,76,227,122,77,228,123,76,227,125,77,229,129,79,230,133,82,231,136,82,108,60,118,110,60,119,115,59,120,122,58,119,128,56,120,136,55,121,144,55,123,149,54,122,154,53,121,158,53,120,164,53,121,168,53,120,172,53,119,175,52,117,177,52,118,181,52,117,186,53,118,189,53,117,193,53,114,197,55,115,201,56,113,203,56,111,207,56,111,208,55,111,211,57,111,211,57,111,212,55,110,211,54,107,214,53,105,215,54,106,216,54,104,215,51,101,222,55,101,220,50,95,222,53,96,223,54,95,218,49,88,222,54,89,226,57,90,220,52,78,220,54,76,217,54,71,225,68,77,238,88,90,243,100,96,234,97,87,227,97,83,230,100,84,230,97,80,232,97,78,233,96,78,232,95,77,233,93,76,233,93,76,233,92,75,233,92,75,234,92,78,234,92,78,234,92,78,235,93,79,236,94,80,237,95,81,236,94,80,236,96,79,238,102,80,232,98,73,236,107,78,232,104,75,226,101,69,238,115,81,233,110,76,230,110,76,231,111,77,233,113,79,233,113,79,233,114,80,232,118,81,233,121,83,233,124,83,105,60,117,107,59,117,113,59,119,118,58,120,123,57,119,131,56,121,136,55,122,141,54,122,147,55,122,151,54,121,157,54,123,160,53,121,164,53,121,167,52,121,171,52,120,173,52,119,178,53,119,182,53,118,185,55,119,190,56,117,192,57,116,196,57,116,199,57,115,200,56,115,203,55,113,206,58,116,208,59,117,209,57,114,209,56,113,210,55,112,212,54,112,213,54,108,212,51,103,216,56,104,215,55,103,215,53,100,218,55,100,218,53,96,219,50,91,223,53,90,224,53,87,224,54,81,219,53,75,215,54,70,219,68,75,230,86,86,233,95,92,229,95,86,232,94,81,234,94,79,234,94,79,235,93,79,234,92,78,234,92,78,233,91,77,234,91,77,234,91,77,234,91,77,235,92,78,235,93,79,234,92,80,233,91,79,234,92,80,236,96,81,232,95,76,238,103,81,230,98,75,231,99,74,238,106,81,232,101,73,233,101,76,235,103,78,234,102,79,236,104,81,236,104,81,235,105,79,234,109,81,236,113,82,236,115,84,102,59,115,104,59,116,108,58,117,113,57,118,118,56,119,124,55,118,130,55,120,135,54,121,141,54,122,145,54,123,150,53,124,154,53,123,157,52,121,159,52,122,163,52,121,167,52,121,171,54,122,175,54,121,178,55,120,182,56,119,185,57,118,189,57,117,192,58,117,194,59,118,197,57,118,197,58,117,199,57,117,200,56,115,204,56,116,205,56,114,205,56,114,207,55,112,206,57,112,208,57,110,209,56,110,212,55,108,215,54,106,217,53,104,219,53,103,220,53,99,220,53,96,219,53,91,218,54,88,217,57,83,216,57,79,214,57,74,219,64,78,225,74,81,233,83,82,233,86,79,234,87,80,235,88,81,236,89,82,236,89,82,236,89,81,234,90,81,233,89,80,233,91,79,233,91,79,232,92,79,232,92,79,233,93,80,232,95,79,231,95,79,230,97,80,230,97,78,231,98,79,232,100,79,234,99,79,234,97,78,233,96,77,235,96,77,234,94,77,235,95,78,236,97,78,235,98,79,234,102,79,235,105,79,235,107,78,99,58,114,102,59,115,104,59,116,108,58,117,113,57,118,118,56,119,125,56,121,128,56,120,134,55,121,138,55,123,144,54,124,147,54,124,150,53,124,153,53,123,156,53,124,159,54,123,164,55,123,168,55,121,170,55,120,175,56,120,177,57,119,181,57,119,184,58,119,187,59,120,190,57,120,190,57,120,193,57,119,195,57,119,196,56,117,198,55,117,199,55,117,199,55,116,198,56,114,199,56,112,200,55,112,204,55,111,207,54,111,210,52,110,213,51,108,213,52,104,215,53,103,214,52,99,215,54,96,216,56,94,216,55,89,217,53,87,219,56,85,223,61,84,222,66,80,224,70,78,228,74,82,233,79,87,235,82,87,233,83,85,231,81,82,229,81,81,232,84,82,230,85,80,231,87,79,231,89,79,232,90,80,233,91,79,233,93,80,234,94,81,232,96,84,232,96,82,233,95,82,233,95,82,234,94,79,234,92,78,234,91,77,235,89,76,234,87,77,234,87,77,235,88,78,234,91,77,234,94,77,234,97,78,234,99,77,97,58,113,98,59,114,100,59,115,104,59,116,108,58,117,112,58,118,117,57,119,121,56,120,127,56,122,131,56,123,136,55,124,140,55,123,141,54,123,145,54,123,147,54,124,151,54,123,155,54,122,159,54,121,161,55,121,166,55,121,170,55,120,173,57,120,176,58,119,178,58,119,182,58,120,182,58,120,185,56,120,186,56,120,188,55,120,190,56,119,191,55,119,191,55,117,194,56,118,194,56,116,195,55,116,197,54,116,200,54,117,202,54,116,203,53,114,205,53,112,208,55,112,209,55,109,212,54,105,215,54,104,216,54,101,216,53,98,218,53,96,217,52,92,215,54,87,216,57,85,219,61,86,222,64,87,225,68,89,226,71,89,227,72,88,228,74,86,229,75,85,230,77,82,231,78,80,232,80,79,233,81,78,235,83,78,236,84,79,236,87,80,234,90,82,233,90,82,234,90,82,235,88,80,235,86,79,235,84,77,235,82,77,234,81,76,232,78,76,232,78,76,232,80,77,231,82,76,231,84,76,231,87,76,231,89,77,93,58,114,94,59,113,97,59,116,98,59,114,102,58,117,104,59,118,110,58,120,114,58,121,119,57,122,123,57,121,128,55,124,131,56,123,134,54,123,136,55,122,138,55,125,142,55,124,147,54,124,151,54,121,154,55,122,156,56,120,161,57,120,163,57,119,168,58,119,169,59,120,171,58,120,172,58,120,174,58,121,176,57,121,177,57,121,179,56,121,180,56,119,182,56,120,185,56,121,186,56,120,188,55,121,189,56,121,190,55,121,192,56,120,195,54,120,197,54,118,200,54,117,203,55,115,206,54,113,206,53,110,208,53,110,212,55,110,213,54,108,211,53,104,214,56,104,213,56,99,212,56,96,212,56,95,214,58,95,218,60,93,221,64,93,223,67,91,223,65,88,224,67,84,225,69,83,227,70,81,230,70,78,232,73,78,234,75,80,235,76,80,234,80,82,234,80,80,234,80,80,234,78,79,233,77,78,234,76,77,232,73,77,232,73,77,230,71,76,231,72,77,229,73,77,229,73,76,230,74,77,231,77,77,232,78,78,89,58,115,90,60,114,91,60,117,93,60,115,95,60,118,99,59,119,103,59,120,107,59,121,110,58,122,114,58,121,119,57,124,123,56,123,126,55,123,128,56,122,129,56,125,133,56,124,137,56,123,141,56,123,143,56,124,147,57,121,149,57,120,153,59,121,157,59,120,158,60,121,160,60,124,161,59,124,163,58,124,164,58,124,166,57,122,168,57,123,170,57,121,171,56,121,172,56,121,175,56,122,175,56,124,177,56,123,179,56,123,181,56,122,184,55,122,188,55,121,190,54,120,194,55,120,197,54,118,197,53,115,199,53,116,202,56,118,202,56,118,201,56,115,206,57,115,208,56,113,208,57,112,208,57,108,210,58,107,211,58,104,213,58,100,214,58,97,218,59,97,219,60,92,221,60,91,224,61,88,225,61,85,228,62,84,231,64,84,231,64,82,233,67,81,233,67,79,234,68,80,233,69,78,232,68,77,230,69,77,228,68,78,228,68,78,227,67,79,227,67,79,228,66,79,230,65,79,232,66,80,233,65,78,236,66,79,86,59,114,87,60,115,87,60,115,88,61,116,90,61,117,93,60,117,98,60,121,100,60,120,104,58,120,108,58,121,112,57,122,116,57,123,118,56,123,121,56,122,122,57,123,124,57,124,128,57,125,132,57,124,134,58,123,137,58,123,140,58,122,143,59,119,145,59,120,146,60,121,148,59,123,148,59,123,150,60,124,151,59,124,153,58,122,155,59,123,157,58,122,159,57,122,161,56,123,163,56,124,163,56,124,166,57,125,168,57,125,171,57,126,173,56,124,176,55,124,180,55,123,183,56,125,187,56,124,189,56,122,190,55,122,192,57,123,192,57,123,193,57,121,196,55,121,199,56,120,200,57,119,201,57,118,203,58,117,205,58,113,206,58,110,207,56,107,210,58,105,213,58,102,214,58,98,218,57,98,219,57,94,221,57,92,223,58,92,224,59,89,227,59,85,228,60,83,228,60,83,228,61,81,228,62,82,228,63,80,226,63,82,226,63,82,225,62,81,227,61,81,228,61,81,229,60,79,231,60,79,232,59,78,235,59,79,82,59,115,83,60,116,83,60,116,84,61,117,85,60,117,88,60,118,91,60,120,94,60,120,98,58,120,102,58,121,107,58,123,109,57,121,111,56,121,113,57,122,116,57,123,118,57,124,119,58,125,120,58,125,124,59,125,125,59,121,129,59,121,131,60,120,134,60,121,135,61,120,136,60,122,136,60,122,138,60,122,139,59,122,141,59,123,143,58,123,144,58,121,147,58,122,149,57,124,152,57,125,153,56,125,154,57,126,157,58,125,159,58,126,163,58,125,164,57,125,168,57,125,171,57,126,174,57,125,178,57,126,181,57,127,183,58,126,184,57,126,186,57,124,189,58,126,190,57,123,190,57,123,191,56,122,192,58,121,194,59,118,197,59,118,199,60,117,200,59,112,203,59,112,205,59,108,208,58,106,209,57,104,211,58,104,214,58,105,214,59,101,217,58,96,218,58,92,220,59,92,222,59,90,223,58,88,225,58,86,227,59,85,228,58,84,228,58,84,230,58,84,229,57,81,229,57,79,229,58,77,229,58,76,230,57,76,78,59,114,78,61,115,79,60,115,80,61,116,80,61,117,82,61,118,86,61,119,89,61,120,91,60,119,95,59,120,99,59,121,103,59,122,104,58,122,107,59,121,109,59,122,110,60,123,110,59,125,112,60,124,115,60,125,117,61,124,119,61,122,121,61,121,122,63,121,123,62,121,123,62,122,125,61,122,127,61,123,127,61,123,129,60,123,131,61,124,132,60,123,134,60,123,138,57,123,139,57,123,142,57,125,143,58,125,147,58,126,149,58,125,151,59,126,153,58,126,159,60,127,159,58,126,162,57,124,167,58,126,171,57,127,173,57,128,175,58,128,178,58,129,180,59,128,181,60,129,183,60,127,184,61,128,186,61,127,187,61,125,188,59,123,188,60,121,193,61,121,194,60,119,195,60,118,199,60,117,201,59,115,202,59,113,204,59,114,205,61,112,208,61,106,210,60,105,212,59,103,215,58,101,218,57,98,219,57,96,222,56,92,224,56,91,227,58,91,227,56,88,227,57,86,226,56,82,226,57,80,226,57,78,228,57,76,72,59,112,71,61,113,75,62,115,75,62,115,77,63,116,79,62,116,81,64,119,84,63,120,85,61,119,89,61,120,91,61,121,92,61,121,95,61,122,97,61,122,100,62,123,100,62,123,103,63,123,103,63,123,104,63,123,104,63,123,107,63,122,108,63,122,108,63,122,111,63,123,112,62,121,112,62,121,114,63,122,116,62,122,116,62,122,117,61,122,117,61,122,120,60,122,125,59,123,128,58,121,130,58,124,131,59,123,134,58,123,137,58,124,140,57,125,142,57,124,147,58,126,148,57,126,152,57,125,154,57,126,159,58,128,161,58,129,164,58,130,165,58,128,169,60,128,170,59,128,173,59,129,174,60,130,175,60,129,176,61,130,178,61,129,178,62,127,182,62,126,184,61,124,185,61,124,189,60,124,190,60,124,191,61,123,193,60,123,194,60,119,198,61,115,202,61,114,203,60,113,206,59,111,208,60,110,210,60,108,212,59,105,215,58,101,218,57,98,219,57,96,222,58,93,223,58,90,225,58,88,225,56,85,226,56,83,67,60,111,68,61,112,69,62,113,70,63,114,71,63,114,73,63,115,74,64,117,77,64,118,80,63,118,82,63,119,83,62,119,86,62,120,88,63,121,89,64,122,91,63,121,93,64,122,94,65,123,95,64,121,96,65,122,98,65,122,98,65,122,100,65,123,100,65,123,102,64,123,104,64,124,104,65,122,105,64,122,105,64,122,108,64,123,108,64,123,108,64,123,111,63,123,115,61,123,117,61,122,119,60,124,121,61,123,122,60,123,125,60,124,129,60,125,131,59,123,135,60,125,138,59,125,140,59,126,142,60,126,146,59,127,149,60,128,150,61,129,152,59,129,156,61,129,157,60,127,160,60,130,161,62,129,163,62,132,163,62,130,165,62,131,167,62,129,169,63,129,171,62,127,172,61,127,175,62,126,177,62,127,178,62,125,180,61,125,182,62,124,186,61,119,189,61,118,190,61,118,192,60,117,194,61,116,197,60,112,201,61,110,203,59,108,207,60,105,210,59,102,211,59,98,214,58,95,217,57,93,218,57,90,219,56,87,60,61,109,61,62,110,62,63,111,65,63,112,65,63,113,67,63,114,70,63,115,73,64,117,73,64,117,74,64,117,78,63,118,81,64,119,82,65,120,84,65,121,85,64,121,85,64,120,89,64,121,89,64,121,90,65,122,92,64,122,93,65,123,94,65,123,94,65,123,95,64,121,96,65,122,98,65,122,99,64,122,99,64,122,102,64,123,102,64,123,102,64,123,103,63,123,103,63,123,104,63,121,106,62,123,107,63,122,109,64,123,112,62,123,114,62,124,117,61,122,120,62,123,123,61,124,125,60,124,127,61,123,130,61,124,132,62,125,134,62,126,136,62,125,142,61,127,143,61,125,146,61,128,147,62,127,147,62,129,148,63,128,149,63,128,151,62,126,153,63,127,155,63,126,157,62,126,159,63,126,161,62,126,162,64,125,163,63,125,165,64,122,171,63,121,174,62,118,176,63,119,178,63,118,180,63,116,184,63,116,187,63,113,190,62,111,193,61,108,196,61,104,200,61,102,201,61,98,204,60,96,205,59,95,206,58,92,53,60,106,54,61,107,56,63,109,57,64,110,59,63,111,60,64,112,63,65,114,65,65,115,68,66,116,69,65,116,72,65,117,74,65,118,75,66,119,77,67,120,77,67,120,79,66,120,83,66,121,84,65,120,84,65,120,85,66,121,86,65,121,87,66,122,87,66,122,89,66,122,89,66,122,90,65,120,91,66,123,93,66,121,93,65,123,93,66,121,94,65,123,94,65,121,94,65,123,93,66,121,94,65,123,96,65,122,98,65,122,100,65,123,103,65,124,105,64,122,108,64,123,109,64,123,112,64,124,113,63,122,115,64,123,118,64,124,119,63,124,122,64,123,127,63,124,128,62,124,131,62,125,131,62,125,132,63,126,132,63,126,134,64,126,135,63,126,138,64,125,139,63,125,141,63,123,143,63,124,144,64,123,146,65,124,146,65,124,149,64,123,154,65,121,158,65,122,159,64,120,162,65,119,165,64,120,168,65,118,171,64,116,175,65,114,177,63,112,180,63,108,183,62,107,187,62,104,190,61,102,191,61,99,191,59,98,47,60,104,49,62,106,50,63,108,51,64,109,52,65,110,53,66,111,55,65,114,58,66,115,61,67,117,61,67,117,64,67,118,66,68,119,67,69,120,69,69,121,69,69,121,72,69,122,75,68,122,76,67,120,76,67,120,77,68,121,78,68,121,79,69,122,79,69,122,81,68,122,81,68,122,82,68,121,83,68,123,85,68,122,85,68,123,85,68,122,86,67,123,85,68,122,84,67,122,84,67,121,86,67,123,86,67,122,88,67,123,90,67,123,92,67,124,95,66,122,97,66,123,99,66,123,100,65,123,103,65,122,103,65,122,105,66,123,105,66,123,108,64,123,112,64,124,114,64,123,115,64,123,116,65,124,116,65,124,116,65,124,119,65,125,120,64,125,122,64,123,124,64,124,124,65,123,126,65,124,126,65,124,129,66,123,130,67,124,133,65,122,136,65,123,138,65,121,140,65,122,143,66,122,146,65,123,149,64,119,153,64,118,157,64,117,161,64,117,163,63,113,167,63,112,169,63,109,173,63,108,174,63,106,174,61,105,41,60,102,41,63,104,44,63,106,43,64,107,46,65,108,47,66,109,49,67,113,51,68,114,55,69,116,55,69,116,57,69,117,58,70,118,60,70,119,60,70,119,63,71,120,64,70,120,68,70,121,69,69,121,69,69,121,69,69,119,70,70,122,72,70,120,73,70,123,73,71,121,73,70,123,74,70,121,74,69,123,74,70,121,74,69,123,76,69,121,76,69,123,76,69,121,76,69,123,76,69,121,77,68,123,78,69,122,79,68,124,82,69,123,83,68,123,86,69,124,87,68,124,88,67,123,90,67,123,90,67,123,92,67,124,92,67,124,94,66,124,95,66,122,97,66,123,99,66,123,101,66,124,101,66,124,102,67,125,102,67,125,104,66,125,104,66,125,105,66,123,106,65,123,109,66,122,109,66,122,110,67,123,111,66,123,112,67,122,114,67,122,117,66,123,119,66,122,121,66,124,124,66,124,127,66,123,130,65,121,134,65,120,135,65,119,140,66,119,144,66,118,147,64,116,151,64,115,152,64,112,153,64,110,155,63,110,36,61,102,35,63,103,39,64,105,38,66,106,41,65,109,42,66,110,43,67,113,46,68,115,47,69,116,47,69,116,49,70,117,50,71,118,53,71,119,53,71,119,54,72,120,55,71,120,59,71,121,60,70,121,60,70,121,61,71,120,61,71,122,63,71,120,64,71,123,64,72,121,64,71,123,65,71,121,65,71,123,65,71,121,65,71,123,67,70,121,67,70,123,67,70,121,68,69,123,69,69,121,70,70,124,70,70,122,72,69,124,74,69,123,74,69,123,77,70,124,78,69,124,79,69,122,79,69,122,81,68,122,82,67,122,82,67,122,85,68,123,85,68,123,85,68,123,85,68,122,87,68,123,87,68,123,87,68,124,87,68,124,88,67,124,88,67,124,90,67,123,90,67,123,92,67,124,92,67,124,92,67,122,95,68,123,95,68,123,96,67,123,98,67,124,101,68,123,102,67,125,105,67,124,108,67,125,111,68,124,114,67,122,115,66,121,119,66,120,123,66,119,124,66,117,128,66,117,130,66,116,132,66,114,133,65,114,32,61,101,31,63,102,35,64,104,34,66,105,37,66,108,38,67,109,39,68,112,41,70,114,41,70,114,42,71,115,43,70,115,44,71,116,47,71,117,48,72,118,48,72,118,50,72,119,51,72,119,54,72,120,54,72,120,54,72,120,55,73,121,55,73,121,56,72,121,56,72,121,56,72,121,56,72,121,57,73,122,57,73,122,59,73,122,59,73,122,59,73,122,60,72,122,61,71,122,61,71,122,61,71,124,62,72,123,64,71,125,65,72,124,66,72,124,66,72,124,68,71,124,69,71,122,70,70,124,70,70,122,70,70,124,73,70,123,73,70,125,73,70,123,73,70,123,71,71,123,74,71,124,74,71,124,74,71,124,74,71,124,75,70,126,75,70,124,77,70,124,77,70,124,78,69,124,78,69,124,79,70,123,79,70,123,80,70,123,80,70,123,82,69,123,83,68,123,84,69,124,87,70,125,88,69,124,90,69,125,94,69,124,96,69,124,99,69,123,101,68,121,103,69,120,106,69,120,107,69,118,109,70,117,111,69,117,29,61,100,29,63,101,31,63,102,31,65,103,33,65,106,34,67,108,36,69,112,37,70,113,38,71,114,38,71,114,40,71,117,41,72,118,42,73,117,42,73,117,42,73,117,44,73,117,46,73,120,48,72,120,49,73,121,49,73,121,49,73,121,49,73,121,49,73,121,49,73,121,51,73,122,51,73,122,51,73,122,51,73,122,51,73,122,51,73,122,51,73,122,51,73,122,52,72,122,52,72,122,53,73,124,53,73,123,55,72,124,56,74,124,56,74,124,56,74,124,57,73,124,57,73,122,59,72,124,59,73,122,58,71,123,59,71,121,59,71,123,59,71,121,60,74,123,60,74,123,60,74,123,60,74,123,61,73,123,61,73,123,61,73,125,61,73,123,63,73,124,63,73,124,63,73,124,63,73,124,65,72,124,65,72,124,65,73,122,66,72,122,66,72,122,68,71,122,68,71,122,68,71,122,70,72,123,71,71,123,73,71,121,74,70,121,78,71,122,79,71,120,81,71,121,83,71,119,84,72,120,85,72,118,85,72,118,27,61,99,28,62,100,29,63,101,30,64,102,31,64,105,33,66,107,34,69,111,35,70,112,36,71,113,37,72,114,38,72,117,39,72,117,40,73,116,40,73,116,40,73,116,40,73,116,42,73,119,42,73,119,43,74,120,43,74,120,43,74,120,43,74,120,43,74,120,43,74,120,45,73,120,45,73,120,45,73,120,46,74,121,46,74,121,46,74,121,46,74,121,46,74,121,47,75,123,47,75,123,47,75,123,47,75,123,47,75,123,49,75,124,49,76,123,49,76,123,49,76,123,51,75,123,51,75,123,51,75,123,51,75,123,50,74,122,51,73,122,51,73,122,51,75,123,51,75,121,51,75,123,51,75,123,52,74,123,52,74,123,52,74,123,52,74,123,53,73,123,53,73,123,53,73,123,53,73,123,55,73,123,55,73,123,55,73,123,55,73,121,55,73,121,56,74,122,56,74,122,57,73,122,57,73,122,60,74,123,61,73,123,61,73,121,62,72,121,64,72,119,65,73,120,66,73,119,66,73,119,67,74,120,69,73,118,27,59,98,28,60,99,28,62,100,29,63,101,29,64,104,31,66,106,33,68,110,34,69,111,33,70,114,34,71,115,35,72,116,38,72,117,38,72,117,39,73,118,39,73,118,39,73,118,40,73,118,40,73,118,41,74,119,41,74,119,41,74,119,41,74,119,41,73,120,41,73,120,41,73,120,41,73,120,43,74,121,43,74,121,43,74,121,43,74,121,43,74,121,42,74,121,43,75,122,42,76,122,42,76,122,42,76,122,42,76,122,44,76,123,44,76,123,44,76,123,44,76,123,45,76,123,45,76,123,45,76,123,44,75,122,44,75,122,46,74,122,46,74,121,46,74,121,46,74,121,46,74,122,46,74,122,47,73,122,47,73,122,47,73,122,47,73,122,49,72,122,49,72,122,49,72,122,49,72,122,49,72,122,49,73,121,49,73,121,49,73,121,49,73,121,49,73,121,50,74,122,51,73,122,51,73,122,51,73,122,52,72,122,53,74,121,52,73,120,54,72,120,55,73,121,56,73,119,57,74,120,57,74,118,57,74,118,27,59,98,27,59,98,28,62,100,29,63,101,29,64,104,30,65,105,32,67,109,33,68,110,33,70,114,33,70,114,34,71,115,35,72,116,38,72,117,38,72,117,38,72,117,38,72,117,38,72,117,39,73,118,39,73,118,39,73,118,40,74,119,40,74,119,40,74,120,40,74,120,40,74,120,40,74,120,42,74,121,42,74,121,42,74,121,42,74,121,43,75,122,42,76,122,41,75,121,39,76,121,40,77,122,40,77,122,40,77,122,40,77,122,42,76,122,42,76,122,42,76,122,42,76,122,42,76,122,42,76,122,42,76,122,42,76,122,43,75,122,43,75,122,44,75,121,44,75,121,44,75,122,44,75,122,46,74,122,46,74,122,46,74,122,46,74,122,47,73,122,47,73,122,47,73,122,47,73,122,47,73,122,47,73,122,47,74,121,47,74,121,46,74,121,46,74,121,47,74,121,47,74,121,47,74,121,47,74,121,50,74,122,50,74,122,49,73,121,49,73,121,51,73,120,51,73,120,52,75,119,52,75,119,52,75,119};
	uint8_t column = 79;
	unsigned int index = 0;

	for (int i = 0; i < column; i++)
	{
		memcpy(&leds, &image_data[index], led_count * 3);
		index += 180;
		update_led_data();
		update();
		HAL_Delay(100);

	}
}
